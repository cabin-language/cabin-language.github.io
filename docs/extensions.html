<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<style>
			* {
				margin: 0px;
				padding: 0px;
				border: none;
				outline: none;
				font-family: sans-serif;
				box-sizing: border-box;
				background: transparent;
			}

			code, code * {
				font-family: monospace;
				background-color: #28283d;
				padding: 0.25em;
				border-radius: 0.5em;
				width: fit-content;
				height: fit-content;
				font-size: inherit;
				padding-left: 0.5em;
				padding-right: 0.5em;
			}

			a {
				text-decoration: none;
				color: inherit;
			}

			a, button, label {
				cursor: pointer;
			}

			main {
				overflow-y: auto;
			}

			html {
				width: 100vw;
				height: 100dvh;
				overflow: hidden;
			}

			body {
				width: 100%;
				height: 100%;
				display: flex;
				flex-direction: column;
				background-color: #181825;
			}
		</style>
		
		<link href="../_app/immutable/assets/Code.CfxVQvV8.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Sidebar.FJhEdaIi.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Documentation.D0Nt6WHQ.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Navbar.Crv-s6UF.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Snippet.C6O97j4K.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.BXKw--Q8.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CfSNqnEh.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DIeogL5L.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BnuAHP-D.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.Chw-iCwz.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/4PsiWv_B.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/D-KyLPO_.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/k3PStlUg.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CSexOY7A.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CWj6FrbW.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BH-SpmUd.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.eSRvYlJS.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/B0rDm8Wc.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DbhpSHTX.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/10.CgGoD4uQ.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/69_IOA4Y.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/S8weOODr.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/AvcqC-dp.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/23L-I8TH.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CKKAmHVQ.js"><!--[--><link rel="icon" href="/_app/immutable/assets/logo.zF9TyQMz.png"><!--]--><!--[--><!--]--><title>Extensions  •  Cabin Docs</title>
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents"><!--[--><!--[--><!----><!----><div class="wrapper svelte-vtebov"><nav class="svelte-tcaiop"><a style="margin-right: auto;" href="/" class="svelte-tcaiop"><img src="/_app/immutable/assets/logo.zF9TyQMz.png" alt="Cabin" class="svelte-tcaiop"> <!--[-->Cabin<!--]--></a> <!--[!--><!--]--> <a href="/docs" class="svelte-tcaiop"><!--[-->Learn<!--]--></a> <a href="/standard-library" class="svelte-tcaiop"><!--[-->Reference<!--]--></a> <a href="/libraries" class="svelte-tcaiop"><!--[-->Libraries<!--]--></a> <a href="/community" class="svelte-tcaiop"><!--[-->Community<!--]--></a></nav><!----> <div class="inner svelte-vtebov"><section class="sidebar svelte-zhm2aq"><h1 class="svelte-zhm2aq">Contents</h1> <ul class="svelte-zhm2aq"><li class="svelte-zhm2aq"><a href="/docs" class="svelte-zhm2aq">Introduction</a> <ul class="svelte-zhm2aq"><li class="svelte-zhm2aq"><a href="/docs#what-is-cabin" class="svelte-zhm2aq">What is Cabin?</a></li> <li class="svelte-zhm2aq"><a href="/docs#navigating-these-docs" class="svelte-zhm2aq">Navigating These Docs</a></li> <li class="svelte-zhm2aq"><a href="/docs#additional-support" class="svelte-zhm2aq">Additional Support</a></li> <li class="svelte-zhm2aq"><a href="/docs#final-remarks" class="svelte-zhm2aq">Final Remarks</a></li></ul></li> <li class="svelte-zhm2aq"><a href="/docs/installation" class="svelte-zhm2aq">Installation</a> <ul class="svelte-zhm2aq"><li class="svelte-zhm2aq"><a href="/docs/installation#testing" class="svelte-zhm2aq">Testing</a></li> <li class="svelte-zhm2aq"><a href="/docs/installation#troubleshooting" class="svelte-zhm2aq">Troubleshooting</a></li> <li class="svelte-zhm2aq"><a href="/docs/installation#editor-setup" class="svelte-zhm2aq">Editor Setup</a></li></ul></li> <li class="svelte-zhm2aq"><a href="/docs/declarations" class="svelte-zhm2aq">Declarations</a> <ul class="svelte-zhm2aq"><li class="svelte-zhm2aq"><a href="/docs/declarations#mutability" class="svelte-zhm2aq">Mutability</a></li> <li class="svelte-zhm2aq"><a href="/docs/declarations#visibility" class="svelte-zhm2aq">Visibility</a></li></ul></li> <li class="svelte-zhm2aq"><a href="/docs/if-expressions" class="svelte-zhm2aq">If Expressions</a> <ul class="svelte-zhm2aq"><li class="svelte-zhm2aq"><a href="/docs/if-expressions#otherwise" class="svelte-zhm2aq"><code class="svelte-zhm2aq">otherwise</code> Blocks</a></li> <li class="svelte-zhm2aq"><a href="/docs/if-expressions#expressions" class="svelte-zhm2aq"><code class="svelte-zhm2aq">if</code> as Expressions</a></li></ul></li> <li class="svelte-zhm2aq"><a href="/docs/loops" class="svelte-zhm2aq">Loops</a> <ul class="svelte-zhm2aq"><li class="svelte-zhm2aq"><a href="/docs/loops#foreach" class="svelte-zhm2aq"><code class="svelte-zhm2aq">foreach</code> Loops</a></li> <li class="svelte-zhm2aq"><a href="/docs/loops#while" class="svelte-zhm2aq"><code class="svelte-zhm2aq">while</code> Loops</a></li> <li class="svelte-zhm2aq"><a href="/docs/loops#expressions" class="svelte-zhm2aq">Loops as Expressions</a></li></ul></li> <li class="svelte-zhm2aq"><a href="/docs/control-flow" class="svelte-zhm2aq">Control Flow</a> <ul class="svelte-zhm2aq"><li class="svelte-zhm2aq"><a href="/docs/control-flow#labels" class="svelte-zhm2aq">Labels &amp; <code class="svelte-zhm2aq">is</code> Statements</a></li> <li class="svelte-zhm2aq"><a href="/docs/control-flow#reserved-labels" class="svelte-zhm2aq">Reserved labels</a> <ul class="svelte-zhm2aq"><li class="svelte-zhm2aq"><a href="/docs/control-flow#it" class="svelte-zhm2aq">The <code class="svelte-zhm2aq">it</code> Label</a></li> <li class="svelte-zhm2aq"><a href="/docs/control-flow#return" class="svelte-zhm2aq">The <code class="svelte-zhm2aq">return</code> Label</a></li> <li class="svelte-zhm2aq"><a href="/docs/control-flow#loop" class="svelte-zhm2aq">The <code class="svelte-zhm2aq">loop</code> Label</a></li> <li class="svelte-zhm2aq"><a href="/docs/control-flow#done" class="svelte-zhm2aq">The <code class="svelte-zhm2aq">done</code> Value</a></li> <li class="svelte-zhm2aq"><a href="/docs/control-flow#iteration" class="svelte-zhm2aq">The <code class="svelte-zhm2aq">iteration</code> Label</a></li></ul></li></ul></li> <li class="svelte-zhm2aq"><a href="/docs/groups" class="svelte-zhm2aq">Groups</a> <ul class="svelte-zhm2aq"><li class="svelte-zhm2aq"><a href="/docs/groups#introduction" class="svelte-zhm2aq">Introduction</a></li> <li class="svelte-zhm2aq"><a href="/docs/groups#nominality" class="svelte-zhm2aq">Nominality</a></li> <li class="svelte-zhm2aq"><a href="/docs/groups#mutability" class="svelte-zhm2aq">Mutability</a></li> <li class="svelte-zhm2aq"><a href="/docs/groups#visibility" class="svelte-zhm2aq">Visibility</a></li> <li class="svelte-zhm2aq"><a href="/docs/groups#compile-time-parameters" class="svelte-zhm2aq">Compile-Time Parameters</a></li></ul></li> <li class="svelte-zhm2aq"><a href="/docs/actions" class="svelte-zhm2aq">Actions</a> <ul class="svelte-zhm2aq"><li class="svelte-zhm2aq"><a href="/docs/actions#return-values" class="svelte-zhm2aq">Return Values</a></li> <li class="svelte-zhm2aq"><a href="/docs/actions#parameters" class="svelte-zhm2aq">Parameters</a></li> <li class="svelte-zhm2aq"><a href="/docs/actions#compile-time-parameters" class="svelte-zhm2aq">Compile-Time Parameters</a></li></ul></li> <li class="svelte-zhm2aq"><a href="/docs/eithers" class="svelte-zhm2aq">Eithers</a> <ul class="svelte-zhm2aq"><li class="svelte-zhm2aq">Subtypes</li></ul></li> <li class="svelte-zhm2aq"><a href="/docs/runtime-evaluation" class="svelte-zhm2aq">Runtime Evaluation</a> <ul class="svelte-zhm2aq"><li class="svelte-zhm2aq">Command-Line Arguments</li> <li class="svelte-zhm2aq">The <code class="svelte-zhm2aq">run</code> Action</li></ul></li> <li class="svelte-zhm2aq"><a href="/docs/extensions" class="svelte-zhm2aq">Extensions</a> <ul class="svelte-zhm2aq"><li class="svelte-zhm2aq"><a href="/docs/extensions#basic-extensions" class="svelte-zhm2aq">Basic extensions</a></li> <li class="svelte-zhm2aq"><a href="/docs/extensions#polymorphic-extensions" class="svelte-zhm2aq">Polymorphic extensions</a></li> <li class="svelte-zhm2aq"><a href="/docs/extensions#operator-overloading" class="svelte-zhm2aq">Operator Overloading</a></li> <li class="svelte-zhm2aq"><a href="/docs/extensions#default-extensions" class="svelte-zhm2aq">Default Extensions</a></li> <li class="svelte-zhm2aq"><a href="/docs/extensions#getters" class="svelte-zhm2aq">Extension Getters</a></li></ul></li> <li class="svelte-zhm2aq"><a href="/docs/tags" class="svelte-zhm2aq">Tags</a> <ul class="svelte-zhm2aq"><li class="svelte-zhm2aq"><a href="/docs/tags#introduction" class="svelte-zhm2aq">Introduction</a></li> <li class="svelte-zhm2aq"><a href="/docs/tags#mutation" class="svelte-zhm2aq">Mutation</a></li></ul></li> <li class="svelte-zhm2aq"><a href="/docs/optionals-and-errors" class="svelte-zhm2aq">Optionals &amp; Errors</a> <ul class="svelte-zhm2aq"><li class="svelte-zhm2aq">The <code class="svelte-zhm2aq">Optional</code> either</li> <li class="svelte-zhm2aq">The <code class="svelte-zhm2aq">Attempt</code> either</li> <li class="svelte-zhm2aq">The <code class="svelte-zhm2aq">?</code> and <code class="svelte-zhm2aq">!</code> operators</li></ul></li> <li class="svelte-zhm2aq"><a href="/docs/external-libraries" class="svelte-zhm2aq">External Libraries</a></li> <li class="svelte-zhm2aq"><a href="/docs/conclusion" class="svelte-zhm2aq">Conclusion</a></li></ul></section><!----> <main class="svelte-vtebov"><h1>Extensions</h1> <p><b>Extensions</b> are how Cabin implements polymorphism, as well as allowing foreign types to be extended with additional
		functionality.</p> <h2 id="basic-extensions">Basic Extensions</h2> <p>To create a basic extension, we use the <code>extensionof</code> keyword with the type we want to extend.</p> <code class="svelte-10k0vxs"><pre>let TextExtension = extensionof Text {
    is_danny = action(this: Text): Boolean {
        is_danny is this == "danny";
    }
};
</pre><!----></code><!----> <p>Once an extension is created, the properties of the extension are available on the type being
		extended:</p> <code class="svelte-10k0vxs"><pre>let danny_is_danny = "danny".is_danny(); # true
let sam_is_danny = "sam".is_danny(); # false
</pre><!----></code><!----> <p><b>The properties in an extension can only be accessed if the extension is visible in the current
			scope.</b> For example, if this extension is declared in a file <code>text.cabin</code> , then to use it in another file, the extension needs to be brought into scope:</p> <code class="svelte-10k0vxs"><pre>let DannyExtension = text.TextExtension; # required

let danny_is_danny = "danny".is_danny(); # true
</pre><!----></code><!----> <h2 id="polymorphic-extensions">Polymorphic Extensions</h2> <p>Extensions can also extend one type <b>"to be"</b> another type. This is the primary way that polymorphism and interfaces are implemented in Cabin.
		Consider the following groups:</p> <code class="svelte-10k0vxs"><pre>let Rectangle = group {
    width: Number,
    height: Number,

    area: action(this: This): Number {
        area is this.width * this.height;
    }
};

let Circle = group {
    radius: Number,

    area: action(this: This): Number {
        area is pi * this.radius ^ 2;
    }
};
</pre><!----></code><!----> <p>Now, lets say we want an action that takes parameters that could be any shape, and just needs to
		calculate their areas. What do we make the type of this parameter? One way is to use an <code>either</code> , but it ends up being a bit verbose:</p> <code class="svelte-10k0vxs"><pre>let Shape = either {
    rectangle: Rectangle,
    circle: Circle
};

let surface_area = action(faces: Shape[]) {
    #[editable] let total = 0;
    foreach shape in faces {
        total = total + match shape {
            rectangle: Rectangle { it is rectangle.area(); }
            circle: Circle { it is circle.area(); }
        };
    };
    surface_area is total;
}

let rectangle = new Rectangle {
    width = 10,
    height = 10
};

let area = surface_area(Shape.rectangle(rectangle));
</pre><!----></code><!----> <p>Gross! What's more, if we ever want to add new shapes, it's gonna be a pain. Thankfully,
		extensions can simplify this for us. Instead of defining <code>Shape</code> as an <code>either</code> , we define it as a <code>group</code> :</p> <code class="svelte-10k0vxs"><pre>let Shape = group {
    area: action(this: This): Number
};
</pre><!----></code><!----> <p>Now, we can <b>extend</b> our subtypes <b>"to be"</b> a <code>Shape</code> :</p> <code class="svelte-10k0vxs"><pre>let RectangleIsShape = extensionof Rectangle tobe Shape {
    area = action(this: This): Number {
        area is this.width * this.height;
    }
};

let CircleIsShape = extensionof Circle tobe Shape {
    area = action(this: This): Number {
        area is pi * this.radius ^ 2;
    }
};
</pre><!----></code><!----> <p>This also allows removing the <code>area</code> actions from our <code>Rectangle</code> and <code>Circle</code> groups, and just using the extension implementation instead. Now, these can safely be passed to <code>surface_area</code> as-is:</p> <code class="svelte-10k0vxs"><pre>let surface_area = action(faces: Shape[]) {
    #[editable] let total = 0;
    foreach shape in faces {
        total = total + shape.area();
    };
    surface_area is total;
}

let rectangle = new Rectangle {
    width = 10,
    height = 10
};

let area = surface_area(rectangle);
</pre><!----></code><!----> <h2 id="operator-overloading">Operator Overloading</h2> <p>Cabin allows operator overloading through several built-in groups. For example, this is the
		defintition for the built-in <code>Addable</code> group:</p> <code class="svelte-10k0vxs"><pre>let Addable = group {
    plus: action(this: This, other: This): This
};
</pre><!----></code><!----> <p>Let's say we have some type that's reasonable to add, such as a <code>Vector</code></p> <code class="svelte-10k0vxs"><pre>let Vector = group {
    x: Number,
    y: Number
};
</pre><!----></code><!----> <p>We can implement <code>Addable</code> for <code>Vector</code> with an extension:</p> <code class="svelte-10k0vxs"><pre>let AddVectors = extensionof Vector tobe Addable {
    plus = action(this: This, other: This): This {
        it is new Vector { x = this.x + other.x, y = this.y + other.y };
    }
};
</pre><!----></code><!----> <p>Now, we can add vectors with the <code>+</code> operator:</p> <code class="svelte-10k0vxs"><pre>let a = new Vector { x = 10, y = 20 };
let b = new Vector { x = 15, y = 5 };

let sum = a + b;
</pre><!----></code><!----> <p>This desugars exactly to:</p> <code class="svelte-10k0vxs"><pre>let a = new Vector { x = 10, y = 20 };
let b = new Vector { x = 15, y = 5 };

let sum = a.plus(b);
</pre><!----></code><!----> <p>The <code>.plus()</code> method can be called manually like this, but it's not idiomatic and will trigger a warning.</p> <h2 id="default-extensions">Default Extensions</h2> <p>One annoyance you might notice with the above implementation is that you have to bring <code>AddVectors</code> into scope whenever you want to be able to add them. This is where the <code>#[default]</code> tag comes in:</p> <code class="svelte-10k0vxs"><pre>#[default]
let AddVectors = extensionof Vector tobe Addable {
    plus = action(this: This, other: This): This {
        it is new Vector { x = this.x + other.x, y = this.y + other.y };
    }
};
</pre><!----></code><!----> <p>Tagging this extension as <code>#[default]</code> means that <b>it will automatically be brought into scope when the type its extending is in scope</b> . For example, in this case, whenever <code>Vector</code> is in scope, the <code>AddVectors</code> extension will automatically be in scopel means that <b>it will automatically be brought into scope when the type its extending is in scope</b> . For example, in this case, whenever <code>Vector</code> is in scope, the <code>AddVectors</code> extension will automatically be in scope.</p> <p>Note the following important things about using <code>#[default]</code></p> <ul><li><code>#[default]</code> can only be used on <b>polymorphic extensions</b> —Extensions of one type <i>to be</i> another.</li> <li><code>#[default]</code> can only be used on an extension that's declared in the same scope as the type it's extending;
			i.e., you cannot make an extension default for a foreign type.</li> <li>Multiple of the same type of extension (such as two implementations of <code>Vector</code> to be <code>Addable</code> ) cannot be marked <code>#[default]</code> ; Only at most one.</li></ul> <h2 id="getters">Extension Getters</h2> <p>Extensions support a feature called <b>getters</b> . Getters can cause confusion, so use them sparingly.</p> <p>So here's the situation: Let's say we have the following <code>Coordinate</code> group:</p> <code class="svelte-te4eze"><pre class="svelte-te4eze"><!----><!----></pre></code><!----> <p>Now, maybe we want to make another way to represent coordinates:</p> <code class="svelte-te4eze"><pre class="svelte-te4eze"><!----><!----></pre></code><!----> <p>Now, what happens if we want to make an <code>extensionof Polar tobe Coordinate</code> ? There's nothing we can use for the <code>x</code> and <code>y</code> properties. This is where <b>getters</b> come in. Getters allow using an <code>action</code> instead of the property directly:</p> <code class="svelte-te4eze"><pre class="svelte-te4eze"><!----><!----></pre></code><!----> <p>It's important to note that from the outside, these properties are opaque, meaning the caller
		doesn't <i>know</i> they're actions, they're simply referenced as a property and automatically called.</p> <p>Some important points about extension getters:</p> <ul><li>The signature of the getter must exactly match <code>action(this: This): PropertyType</code></li> <li>All getters are automatically marked with <code>#[no_side_effects]</code> . This means you cannot interact with the system in any way from getters, such as printing to the
			console, taking user input, writing files, etc. While this helps avoid hidden behavior, note that
			there's no way for the compiler to prevent getters from entering an infinite loop or recursing
			indefinitely.</li></ul><!----> <span class="navigation-buttons svelte-vtebov"><!--[!--><!--]--> <!--[!--><!--]--></span></main></div></div><!----><!----><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_afbuon = {
						base: new URL("..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("../_app/immutable/entry/start.BXKw--Q8.js"),
						import("../_app/immutable/entry/app.Chw-iCwz.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 10],
							data: [null,null],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
